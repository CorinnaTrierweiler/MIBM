<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 7 Subsetting | Learning Data Science in R</title>
  <meta name="description" content="These are notes gathering my experience in data science with R.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 7 Subsetting | Learning Data Science in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="These are notes gathering my experience in data science with R." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Subsetting | Learning Data Science in R" />
  
  <meta name="twitter:description" content="These are notes gathering my experience in data science with R." />
  

<meta name="author" content="Antonio Fidalgo">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="simple-functions-on-vectors.html">
<link rel="next" href="conditions.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Learning Data Science in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Foreword</a></li>
<li class="part"><span><b>I Getting started</b></span></li>
<li class="chapter" data-level="1" data-path="getset.html"><a href="getset.html"><i class="fa fa-check"></i><b>1</b> Getting set</a><ul>
<li class="chapter" data-level="1.1" data-path="getset.html"><a href="getset.html#install-applications"><i class="fa fa-check"></i><b>1.1</b> Install applications</a></li>
<li class="chapter" data-level="1.2" data-path="getset.html"><a href="getset.html#sign-for-github"><i class="fa fa-check"></i><b>1.2</b> Sign for GitHub</a></li>
<li class="chapter" data-level="1.3" data-path="getset.html"><a href="getset.html#create-your-project"><i class="fa fa-check"></i><b>1.3</b> Create your project</a></li>
<li class="chapter" data-level="1.4" data-path="getset.html"><a href="getset.html#create-github-repo-and-link-your-machine-to-it"><i class="fa fa-check"></i><b>1.4</b> Create GitHub repo and link your machine to it</a></li>
</ul></li>
<li class="part"><span><b>II Source file and output files</b></span></li>
<li class="chapter" data-level="2" data-path="rmd.html"><a href="rmd.html"><i class="fa fa-check"></i><b>2</b> Rmd files</a><ul>
<li class="chapter" data-level="2.1" data-path="rmd.html"><a href="rmd.html#options-for-all-chuncks"><i class="fa fa-check"></i><b>2.1</b> Options for all chuncks</a></li>
<li class="chapter" data-level="2.2" data-path="rmd.html"><a href="rmd.html#latex-code"><i class="fa fa-check"></i><b>2.2</b> Latex code</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="custom-ouptut.html"><a href="custom-ouptut.html"><i class="fa fa-check"></i><b>3</b> Customize output</a><ul>
<li class="chapter" data-level="3.1" data-path="custom-ouptut.html"><a href="custom-ouptut.html#multiple-built-in-output-types"><i class="fa fa-check"></i><b>3.1</b> Multiple built-in output types</a></li>
<li class="chapter" data-level="3.2" data-path="custom-ouptut.html"><a href="custom-ouptut.html#new-types-provided-by-packages"><i class="fa fa-check"></i><b>3.2</b> New types provided by packages</a></li>
<li class="chapter" data-level="3.3" data-path="custom-ouptut.html"><a href="custom-ouptut.html#css-custom-html"><i class="fa fa-check"></i><b>3.3</b> CSS: custom html</a></li>
<li class="chapter" data-level="3.4" data-path="custom-ouptut.html"><a href="custom-ouptut.html#latex-preamble"><i class="fa fa-check"></i><b>3.4</b> Latex preamble</a></li>
</ul></li>
<li class="part"><span><b>III R Basics</b></span></li>
<li class="chapter" data-level="4" data-path="rcalc.html"><a href="rcalc.html"><i class="fa fa-check"></i><b>4</b> R as a calculator</a><ul>
<li class="chapter" data-level="4.1" data-path="rcalc.html"><a href="rcalc.html#usual-operators"><i class="fa fa-check"></i><b>4.1</b> Usual operators</a></li>
<li class="chapter" data-level="4.2" data-path="rcalc.html"><a href="rcalc.html#unusual-operators"><i class="fa fa-check"></i><b>4.2</b> Unusual operators</a></li>
<li class="chapter" data-level="4.3" data-path="rcalc.html"><a href="rcalc.html#usual-functions"><i class="fa fa-check"></i><b>4.3</b> Usual functions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="datastructures.html"><a href="datastructures.html"><i class="fa fa-check"></i><b>5</b> Data stuctures</a><ul>
<li class="chapter" data-level="5.1" data-path="datastructures.html"><a href="datastructures.html#atomic-vectors"><i class="fa fa-check"></i><b>5.1</b> Atomic vectors</a></li>
<li class="chapter" data-level="5.2" data-path="datastructures.html"><a href="datastructures.html#matrices-and-arrays"><i class="fa fa-check"></i><b>5.2</b> Matrices and arrays</a></li>
<li class="chapter" data-level="5.3" data-path="datastructures.html"><a href="datastructures.html#lists"><i class="fa fa-check"></i><b>5.3</b> Lists</a></li>
<li class="chapter" data-level="5.4" data-path="datastructures.html"><a href="datastructures.html#data-frames"><i class="fa fa-check"></i><b>5.4</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="simple-functions-on-vectors.html"><a href="simple-functions-on-vectors.html"><i class="fa fa-check"></i><b>6</b> Simple functions on vectors</a></li>
<li class="chapter" data-level="7" data-path="subset.html"><a href="subset.html"><i class="fa fa-check"></i><b>7</b> Subsetting</a><ul>
<li class="chapter" data-level="7.1" data-path="subset.html"><a href="subset.html#generalities-about-subsetting"><i class="fa fa-check"></i><b>7.1</b> Generalities about subsetting</a></li>
<li class="chapter" data-level="7.2" data-path="subset.html"><a href="subset.html#section"><i class="fa fa-check"></i><b>7.2</b> <code>[]</code></a></li>
<li class="chapter" data-level="7.3" data-path="subset.html"><a href="subset.html#section-1"><i class="fa fa-check"></i><b>7.3</b> <code>[[]]</code></a></li>
<li class="chapter" data-level="7.4" data-path="subset.html"><a href="subset.html#section-2"><i class="fa fa-check"></i><b>7.4</b> <code>$</code></a></li>
<li class="chapter" data-level="7.5" data-path="subset.html"><a href="subset.html#combining-subsetting"><i class="fa fa-check"></i><b>7.5</b> Combining subsetting</a></li>
<li class="chapter" data-level="7.6" data-path="subset.html"><a href="subset.html#subsetting-with-one-condition"><i class="fa fa-check"></i><b>7.6</b> Subsetting with one condition</a></li>
<li class="chapter" data-level="7.7" data-path="subset.html"><a href="subset.html#subsetting-and-assignment"><i class="fa fa-check"></i><b>7.7</b> Subsetting and assignment</a></li>
<li class="chapter" data-level="7.8" data-path="subset.html"><a href="subset.html#using-which"><i class="fa fa-check"></i><b>7.8</b> Using <code>which()</code></a></li>
<li class="chapter" data-level="7.9" data-path="subset.html"><a href="subset.html#more-advanced-stuff"><i class="fa fa-check"></i><b>7.9</b> More advanced stuff</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="conditions.html"><a href="conditions.html"><i class="fa fa-check"></i><b>8</b> Conditions</a><ul>
<li class="chapter" data-level="8.1" data-path="conditions.html"><a href="conditions.html#if-statement"><i class="fa fa-check"></i><b>8.1</b> <code>if</code> statement</a></li>
<li class="chapter" data-level="8.2" data-path="conditions.html"><a href="conditions.html#else-statement"><i class="fa fa-check"></i><b>8.2</b> <code>else</code> statement</a></li>
<li class="chapter" data-level="8.3" data-path="conditions.html"><a href="conditions.html#else-if-statement"><i class="fa fa-check"></i><b>8.3</b> <code>else if</code> statement</a></li>
<li class="chapter" data-level="8.4" data-path="conditions.html"><a href="conditions.html#ifelse-statement"><i class="fa fa-check"></i><b>8.4</b> <code>ifelse</code> statement</a></li>
<li class="chapter" data-level="8.5" data-path="conditions.html"><a href="conditions.html#logical-operators-and"><i class="fa fa-check"></i><b>8.5</b> Logical operators: <code>&amp;</code>, <code>|</code> and <code>!</code></a></li>
<li class="chapter" data-level="8.6" data-path="conditions.html"><a href="conditions.html#writing-and-interpreting-a-condition"><i class="fa fa-check"></i><b>8.6</b> Writing and interpreting a condition</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>9</b> Conclusion</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Learning Data Science in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="subset" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Subsetting</h1>
<div id="generalities-about-subsetting" class="section level2">
<h2><span class="header-section-number">7.1</span> Generalities about subsetting</h2>
<p>There are three subsetting operators: <code>$</code>, <code>[]</code> and <code>[[]]</code>.<br />
Some functions also allow to create subsets: we’ll see that later.<br />
We can combine subsetting and assignment to change some parts of an object.<br />
Complement to <code>str()</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">va &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">13.1</span>, <span class="fl">-15.2</span>, <span class="fl">0.3</span>, <span class="fl">2.4</span>, <span class="fl">10.5</span>, <span class="fl">-3.6</span>, <span class="fl">9.7</span>) <span class="co"># create the vector va</span>
<span class="kw">str</span>(va)
<span class="co">#&gt;  num [1:7] 13.1 -15.2 0.3 2.4 10.5 -3.6 9.7</span></code></pre>
<p>One can see from this call, that va is a simple vector with r length(va) elements. Subsetting means chosing among these.</p>
</div>
<div id="section" class="section level2">
<h2><span class="header-section-number">7.2</span> <code>[]</code></h2>
<p>Applies to vectors, matrices, lists and data frames.<br />
Can be used with:</p>
<pre><code>- positive or negative values,
- many values in a vector,
- logical, `NA`,
- character vectors when names.</code></pre>
<div id="on-a-vector" class="section level3">
<h3><span class="header-section-number">7.2.1</span> On a vector</h3>
<p>Here are a few examples of that object used on a vector.</p>
<pre class="sourceCode r"><code class="sourceCode r">va &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">13.1</span>, <span class="fl">-15.2</span>, <span class="fl">0.3</span>, <span class="fl">2.4</span>, <span class="fl">10.5</span>, <span class="fl">-3.6</span>, <span class="fl">9.7</span>)
va[<span class="dv">1</span>] <span class="co"># element 1</span>
<span class="co">#&gt; [1] 13.1</span>
va[<span class="kw">c</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>)] <span class="co"># elements 3 to 5</span>
<span class="co">#&gt; [1]  0.3  2.4 10.5</span>
va[<span class="op">-</span><span class="dv">1</span>] <span class="co"># all elements minus the element 1</span>
<span class="co">#&gt; [1] -15.2   0.3   2.4  10.5  -3.6   9.7</span>
va[<span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>,<span class="ot">TRUE</span>,<span class="ot">FALSE</span>,<span class="ot">FALSE</span>,<span class="ot">TRUE</span>,<span class="ot">FALSE</span>)] 
<span class="co">#&gt; [1]  13.1 -15.2   0.3  -3.6</span>
va[<span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">FALSE</span>)] <span class="co"># notice the recycling at play here</span>
<span class="co">#&gt; [1] 13.1  0.3 10.5  9.7</span>
va[<span class="ot">NA</span>] 
<span class="co">#&gt; [1] NA NA NA NA NA NA NA</span>
va[] <span class="co"># nothing selected gives the full vector</span>
<span class="co">#&gt; [1]  13.1 -15.2   0.3   2.4  10.5  -3.6   9.7</span>
<span class="kw">names</span>(va)&lt;-letters[<span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(va)] <span class="co"># give names to va</span>
<span class="co"># notice that we subset the vector letters (given by R) and that we don&#39;t</span>
<span class="co"># specify the length but give a general value</span>
<span class="co"># now we can subset using names</span>
va
<span class="co">#&gt;     a     b     c     d     e     f     g </span>
<span class="co">#&gt;  13.1 -15.2   0.3   2.4  10.5  -3.6   9.7</span>
va[<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;e&quot;</span>,<span class="st">&quot;b&quot;</span>)]
<span class="co">#&gt;     a     e     b </span>
<span class="co">#&gt;  13.1  10.5 -15.2</span></code></pre>
</div>
<div id="on-a-list" class="section level3">
<h3><span class="header-section-number">7.2.2</span> On a list</h3>
<pre class="sourceCode r"><code class="sourceCode r">mylist&lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">numbers=</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">20</span>), 
              <span class="dt">ournames=</span><span class="kw">c</span>(<span class="st">&quot;Jim&quot;</span>,<span class="st">&quot;Jules&quot;</span>), 
              <span class="dt">results=</span> <span class="kw">c</span>(T,F,F,T), 
              <span class="dt">school=</span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;Primary&quot;</span>, <span class="st">&quot;Secondary&quot;</span>, <span class="st">&quot;Tertiary&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>))
<span class="kw">str</span>(mylist)
<span class="co">#&gt; List of 4</span>
<span class="co">#&gt;  $ numbers : int [1:20] 1 2 3 4 5 6 7 8 9 10 ...</span>
<span class="co">#&gt;  $ ournames: chr [1:2] &quot;Jim&quot; &quot;Jules&quot;</span>
<span class="co">#&gt;  $ results : logi [1:4] TRUE FALSE FALSE TRUE</span>
<span class="co">#&gt;  $ school  : Ord.factor w/ 3 levels &quot;Primary&quot;&lt;&quot;Secondary&quot;&lt;..: 1 2 3</span>

mylist[<span class="dv">1</span>] <span class="co"># first element of the list</span>
<span class="co">#&gt; $numbers</span>
<span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20</span>
<span class="kw">class</span>(mylist[<span class="dv">1</span>])
<span class="co">#&gt; [1] &quot;list&quot;</span>
mylist[[<span class="dv">3</span>]][<span class="dv">3</span>]
<span class="co">#&gt; [1] FALSE</span></code></pre>
<p>Notice that the result of this subsetting is a r class(mylist[1])!</p>
</div>
<div id="on-a-matrix" class="section level3">
<h3><span class="header-section-number">7.2.3</span> On a matrix</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">42</span>)
my.mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">floor</span>(<span class="kw">runif</span>(<span class="dv">30</span>)<span class="op">*</span><span class="dv">10</span>), <span class="dt">nrow=</span><span class="dv">5</span>)
my.mat
<span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6]</span>
<span class="co">#&gt; [1,]    9    5    4    9    9    5</span>
<span class="co">#&gt; [2,]    9    7    7    9    1    3</span>
<span class="co">#&gt; [3,]    2    1    9    1    9    9</span>
<span class="co">#&gt; [4,]    8    6    2    4    9    4</span>
<span class="co">#&gt; [5,]    6    7    4    5    0    8</span>
<span class="kw">str</span>(my.mat)
<span class="co">#&gt;  num [1:5, 1:6] 9 9 2 8 6 5 7 1 6 7 ...</span>
<span class="kw">length</span>(my.mat)
<span class="co">#&gt; [1] 30</span></code></pre>
<p>The structure shows that there are r length(dim(my.mat)) dimensions. For subsetting, we must give r length(dim(my.mat)) dimensions! Same rules as for the vectors apply.</p>
<pre class="sourceCode r"><code class="sourceCode r">my.mat[<span class="dv">2</span>,<span class="dv">3</span>] <span class="co"># 2nd row, 3rd row</span>
<span class="co">#&gt; [1] 7</span>
my.mat[<span class="op">-</span><span class="dv">1</span>,]
<span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6]</span>
<span class="co">#&gt; [1,]    9    7    7    9    1    3</span>
<span class="co">#&gt; [2,]    2    1    9    1    9    9</span>
<span class="co">#&gt; [3,]    8    6    2    4    9    4</span>
<span class="co">#&gt; [4,]    6    7    4    5    0    8</span>
<span class="kw">colnames</span>(my.mat) &lt;-<span class="st"> </span>letters[<span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(my.mat)] <span class="co"># give names to the columns</span>
<span class="kw">rownames</span>(my.mat) &lt;-<span class="st"> </span>LETTERS[<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(my.mat)] <span class="co"># give names to the rows</span>
my.mat
<span class="co">#&gt;   a b c d e f</span>
<span class="co">#&gt; A 9 5 4 9 9 5</span>
<span class="co">#&gt; B 9 7 7 9 1 3</span>
<span class="co">#&gt; C 2 1 9 1 9 9</span>
<span class="co">#&gt; D 8 6 2 4 9 4</span>
<span class="co">#&gt; E 6 7 4 5 0 8</span>
my.mat[<span class="st">&quot;C&quot;</span>,<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;c&quot;</span>,<span class="st">&quot;e&quot;</span>)]
<span class="co">#&gt; a c e </span>
<span class="co">#&gt; 2 9 9</span></code></pre>
</div>
</div>
<div id="section-1" class="section level2">
<h2><span class="header-section-number">7.3</span> <code>[[]]</code></h2>
<p>This object is used mainly for lists.</p>
<pre class="sourceCode r"><code class="sourceCode r">mylist&lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">numbers=</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">20</span>), 
              <span class="dt">ournames=</span><span class="kw">c</span>(<span class="st">&quot;Jim&quot;</span>,<span class="st">&quot;Jules&quot;</span>), 
              <span class="dt">results=</span> <span class="kw">c</span>(T,F,F,T), 
              <span class="dt">school=</span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;Primary&quot;</span>, <span class="st">&quot;Secondary&quot;</span>, <span class="st">&quot;Tertiary&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>))
<span class="kw">str</span>(mylist)
<span class="co">#&gt; List of 4</span>
<span class="co">#&gt;  $ numbers : int [1:20] 1 2 3 4 5 6 7 8 9 10 ...</span>
<span class="co">#&gt;  $ ournames: chr [1:2] &quot;Jim&quot; &quot;Jules&quot;</span>
<span class="co">#&gt;  $ results : logi [1:4] TRUE FALSE FALSE TRUE</span>
<span class="co">#&gt;  $ school  : Ord.factor w/ 3 levels &quot;Primary&quot;&lt;&quot;Secondary&quot;&lt;..: 1 2 3</span>
mylist[[<span class="dv">1</span>]]
<span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20</span></code></pre>
</div>
<div id="section-2" class="section level2">
<h2><span class="header-section-number">7.4</span> <code>$</code></h2>
<p>This object is usually for data frames, where it gives the variable.<br />
It allows partial matching (e.g., <code>mtcars$gear</code> is the same as <code>mtcars$gea</code>)</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(mtcars)
<span class="kw">names</span>(mtcars)
<span class="co">#&gt;  [1] &quot;mpg&quot;  &quot;cyl&quot;  &quot;disp&quot; &quot;hp&quot;   &quot;drat&quot; &quot;wt&quot;   &quot;qsec&quot; &quot;vs&quot;   &quot;am&quot;   &quot;gear&quot;</span>
<span class="co">#&gt; [11] &quot;carb&quot;</span>
mtcars<span class="op">$</span>mpg
<span class="co">#&gt;  [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2</span>
<span class="co">#&gt; [15] 10.4 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4</span>
<span class="co">#&gt; [29] 15.8 19.7 15.0 21.4</span>
mtcars[[<span class="st">&quot;mpg&quot;</span>]] <span class="co"># just exactly the same, but R users prefer the $</span>
<span class="co">#&gt;  [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2</span>
<span class="co">#&gt; [15] 10.4 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4</span>
<span class="co">#&gt; [29] 15.8 19.7 15.0 21.4</span>
mtcars[<span class="st">&quot;mpg&quot;</span>] <span class="co"># NOT the same at all! [] preserves the class</span>
<span class="co">#&gt;                      mpg</span>
<span class="co">#&gt; Mazda RX4           21.0</span>
<span class="co">#&gt; Mazda RX4 Wag       21.0</span>
<span class="co">#&gt; Datsun 710          22.8</span>
<span class="co">#&gt; Hornet 4 Drive      21.4</span>
<span class="co">#&gt; Hornet Sportabout   18.7</span>
<span class="co">#&gt; Valiant             18.1</span>
<span class="co">#&gt; Duster 360          14.3</span>
<span class="co">#&gt; Merc 240D           24.4</span>
<span class="co">#&gt; Merc 230            22.8</span>
<span class="co">#&gt; Merc 280            19.2</span>
<span class="co">#&gt; Merc 280C           17.8</span>
<span class="co">#&gt; Merc 450SE          16.4</span>
<span class="co">#&gt; Merc 450SL          17.3</span>
<span class="co">#&gt; Merc 450SLC         15.2</span>
<span class="co">#&gt; Cadillac Fleetwood  10.4</span>
<span class="co">#&gt; Lincoln Continental 10.4</span>
<span class="co">#&gt; Chrysler Imperial   14.7</span>
<span class="co">#&gt; Fiat 128            32.4</span>
<span class="co">#&gt; Honda Civic         30.4</span>
<span class="co">#&gt; Toyota Corolla      33.9</span>
<span class="co">#&gt; Toyota Corona       21.5</span>
<span class="co">#&gt; Dodge Challenger    15.5</span>
<span class="co">#&gt; AMC Javelin         15.2</span>
<span class="co">#&gt; Camaro Z28          13.3</span>
<span class="co">#&gt; Pontiac Firebird    19.2</span>
<span class="co">#&gt; Fiat X1-9           27.3</span>
<span class="co">#&gt; Porsche 914-2       26.0</span>
<span class="co">#&gt; Lotus Europa        30.4</span>
<span class="co">#&gt; Ford Pantera L      15.8</span>
<span class="co">#&gt; Ferrari Dino        19.7</span>
<span class="co">#&gt; Maserati Bora       15.0</span>
<span class="co">#&gt; Volvo 142E          21.4</span>
<span class="kw">class</span>(mtcars[<span class="st">&quot;mpg&quot;</span>])
<span class="co">#&gt; [1] &quot;data.frame&quot;</span></code></pre>
</div>
<div id="combining-subsetting" class="section level2">
<h2><span class="header-section-number">7.5</span> Combining subsetting</h2>
<p>Notice that we can often subset further until having the desired subset. Here are a few examples.</p>
<pre class="sourceCode r"><code class="sourceCode r">mtcars<span class="op">$</span>mpg[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]
<span class="co">#&gt; [1] 21.0 21.0 22.8 21.4</span>
mylist[[<span class="st">&quot;ournames&quot;</span>]][<span class="dv">1</span>]
<span class="co">#&gt; [1] &quot;Jim&quot;</span>
mylist<span class="op">$</span>ournames[<span class="dv">1</span>]
<span class="co">#&gt; [1] &quot;Jim&quot;</span></code></pre>
</div>
<div id="subsetting-with-one-condition" class="section level2">
<h2><span class="header-section-number">7.6</span> Subsetting with one condition</h2>
<p>We can use conditions for subsetting</p>
<pre class="sourceCode r"><code class="sourceCode r">mtcars[mtcars<span class="op">$</span>cyl<span class="op">==</span><span class="dv">8</span>,]
<span class="co">#&gt;                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span>
<span class="co">#&gt; Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2</span>
<span class="co">#&gt; Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4</span>
<span class="co">#&gt; Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3</span>
<span class="co">#&gt; Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3</span>
<span class="co">#&gt; Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3</span>
<span class="co">#&gt; Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4</span>
<span class="co">#&gt; Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4</span>
<span class="co">#&gt; Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4</span>
<span class="co">#&gt; Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2</span>
<span class="co">#&gt; AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2</span>
<span class="co">#&gt; Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4</span>
<span class="co">#&gt; Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2</span>
<span class="co">#&gt; Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4</span>
<span class="co">#&gt; Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8</span>
mtcars[mtcars<span class="op">$</span>cyl<span class="op">==</span><span class="dv">8</span> <span class="op">&amp;</span><span class="st"> </span>mtcars<span class="op">$</span>carb<span class="op">==</span><span class="dv">4</span>,]
<span class="co">#&gt;                      mpg cyl disp  hp drat    wt  qsec vs am gear carb</span>
<span class="co">#&gt; Duster 360          14.3   8  360 245 3.21 3.570 15.84  0  0    3    4</span>
<span class="co">#&gt; Cadillac Fleetwood  10.4   8  472 205 2.93 5.250 17.98  0  0    3    4</span>
<span class="co">#&gt; Lincoln Continental 10.4   8  460 215 3.00 5.424 17.82  0  0    3    4</span>
<span class="co">#&gt; Chrysler Imperial   14.7   8  440 230 3.23 5.345 17.42  0  0    3    4</span>
<span class="co">#&gt; Camaro Z28          13.3   8  350 245 3.73 3.840 15.41  0  0    3    4</span>
<span class="co">#&gt; Ford Pantera L      15.8   8  351 264 4.22 3.170 14.50  0  1    5    4</span>
mtcars[mtcars<span class="op">$</span>cyl<span class="op">==</span><span class="dv">8</span>, <span class="kw">c</span>(<span class="st">&quot;cyl&quot;</span>, <span class="st">&quot;mpg&quot;</span>, <span class="st">&quot;wt&quot;</span>)]
<span class="co">#&gt;                     cyl  mpg    wt</span>
<span class="co">#&gt; Hornet Sportabout     8 18.7 3.440</span>
<span class="co">#&gt; Duster 360            8 14.3 3.570</span>
<span class="co">#&gt; Merc 450SE            8 16.4 4.070</span>
<span class="co">#&gt; Merc 450SL            8 17.3 3.730</span>
<span class="co">#&gt; Merc 450SLC           8 15.2 3.780</span>
<span class="co">#&gt; Cadillac Fleetwood    8 10.4 5.250</span>
<span class="co">#&gt; Lincoln Continental   8 10.4 5.424</span>
<span class="co">#&gt; Chrysler Imperial     8 14.7 5.345</span>
<span class="co">#&gt; Dodge Challenger      8 15.5 3.520</span>
<span class="co">#&gt; AMC Javelin           8 15.2 3.435</span>
<span class="co">#&gt; Camaro Z28            8 13.3 3.840</span>
<span class="co">#&gt; Pontiac Firebird      8 19.2 3.845</span>
<span class="co">#&gt; Ford Pantera L        8 15.8 3.170</span>
<span class="co">#&gt; Maserati Bora         8 15.0 3.570</span></code></pre>
</div>
<div id="subsetting-and-assignment" class="section level2">
<h2><span class="header-section-number">7.7</span> Subsetting and assignment</h2>
<p>Subsetting can be used to change a part of an object through assignment. Assign <code>NULL</code> to delete subset</p>
<pre class="sourceCode r"><code class="sourceCode r">my.mat
<span class="co">#&gt;   a b c d e f</span>
<span class="co">#&gt; A 9 5 4 9 9 5</span>
<span class="co">#&gt; B 9 7 7 9 1 3</span>
<span class="co">#&gt; C 2 1 9 1 9 9</span>
<span class="co">#&gt; D 8 6 2 4 9 4</span>
<span class="co">#&gt; E 6 7 4 5 0 8</span>
my.mat[,<span class="dv">1</span>]&lt;-<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(my.mat)
my.mat
<span class="co">#&gt;   a b c d e f</span>
<span class="co">#&gt; A 1 5 4 9 9 5</span>
<span class="co">#&gt; B 2 7 7 9 1 3</span>
<span class="co">#&gt; C 3 1 9 1 9 9</span>
<span class="co">#&gt; D 4 6 2 4 9 4</span>
<span class="co">#&gt; E 5 7 4 5 0 8</span>
mtcars<span class="op">$</span>mpg[<span class="dv">1</span>]&lt;-<span class="dv">1234</span>
<span class="kw">names</span>(mtcars)
<span class="co">#&gt;  [1] &quot;mpg&quot;  &quot;cyl&quot;  &quot;disp&quot; &quot;hp&quot;   &quot;drat&quot; &quot;wt&quot;   &quot;qsec&quot; &quot;vs&quot;   &quot;am&quot;   &quot;gear&quot;</span>
<span class="co">#&gt; [11] &quot;carb&quot;</span>
mtcars<span class="op">$</span>drat&lt;-<span class="ot">NULL</span> <span class="co"># delete variable drat in data frame mtcars</span>
<span class="co"># does not delete in matrix</span>
<span class="kw">names</span>(mtcars)
<span class="co">#&gt;  [1] &quot;mpg&quot;  &quot;cyl&quot;  &quot;disp&quot; &quot;hp&quot;   &quot;wt&quot;   &quot;qsec&quot; &quot;vs&quot;   &quot;am&quot;   &quot;gear&quot; &quot;carb&quot;</span></code></pre>
</div>
<div id="using-which" class="section level2">
<h2><span class="header-section-number">7.8</span> Using <code>which()</code></h2>
<p><code>which()</code> gives the integers that correspond to the boolean (logical) <code>TRUE</code>.<br />
This can help subsetting</p>
<pre class="sourceCode r"><code class="sourceCode r">vb&lt;-<span class="dv">1500</span><span class="op">:</span><span class="dv">1530</span>
vb
<span class="co">#&gt;  [1] 1500 1501 1502 1503 1504 1505 1506 1507 1508 1509 1510 1511 1512 1513</span>
<span class="co">#&gt; [15] 1514 1515 1516 1517 1518 1519 1520 1521 1522 1523 1524 1525 1526 1527</span>
<span class="co">#&gt; [29] 1528 1529 1530</span>
<span class="kw">which</span>(vb<span class="op">%%</span><span class="dv">5</span><span class="op">==</span><span class="dv">0</span>) <span class="co"># which is divisible by 5 (modulo is 0) ?</span>
<span class="co">#&gt; [1]  1  6 11 16 21 26 31</span>
<span class="co"># notice that this is asking each element of vb, </span>
<span class="co"># which() reports the positions for which the answer is TRUE </span>
vb[<span class="kw">which</span>(vb<span class="op">%%</span><span class="dv">5</span><span class="op">==</span><span class="dv">0</span>)] 
<span class="co">#&gt; [1] 1500 1505 1510 1515 1520 1525 1530</span></code></pre>
</div>
<div id="more-advanced-stuff" class="section level2">
<h2><span class="header-section-number">7.9</span> More advanced stuff</h2>
<div id="difference-between-simplifying-and-preserving" class="section level3">
<h3><span class="header-section-number">7.9.1</span> Difference between simplifying and preserving</h3>
<p>We say ‘preserve’ to say the same structure is maintained when subsetting (e.g., a subset of a data frame remains a data frame).<br />
Simplifying does not keep the structure but gives the simplest output possible.<br />
<code>drop</code> argument allows to preserve (<code>drop=FALSE</code>) or not (<code>drop= TRUE</code>).<br />
<code>[]</code> usually preserves, <code>[[]]</code> usually simplifies.<br />
To better understand, check the classes:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all.equal</span>(<span class="kw">class</span>(mylist[<span class="dv">1</span>]), <span class="kw">class</span>(mylist[[<span class="dv">1</span>]]))
<span class="co">#&gt; [1] &quot;1 string mismatch&quot;</span>
<span class="kw">class</span>(mylist[<span class="dv">1</span>])
<span class="co">#&gt; [1] &quot;list&quot;</span>
<span class="kw">class</span>(mylist[[<span class="dv">1</span>]])
<span class="co">#&gt; [1] &quot;integer&quot;</span>
<span class="kw">all.equal</span>(<span class="kw">class</span>(mylist), <span class="kw">class</span>(mylist[<span class="dv">1</span>]))
<span class="co">#&gt; [1] TRUE</span>
<span class="kw">all.equal</span>(<span class="kw">class</span>(mylist), <span class="kw">class</span>(mylist[[<span class="dv">1</span>]]))
<span class="co">#&gt; [1] &quot;1 string mismatch&quot;</span></code></pre>
<p>We see that <code>[]</code> has preserved the class of <code>mylist</code> (r class(mylist)), while <code>[[]]</code> has not!
Another striking example is the following.</p>
<pre class="sourceCode r"><code class="sourceCode r">ma2 &lt;-<span class="st"> </span>my.mat[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]
<span class="kw">class</span>(ma2)
<span class="co">#&gt; [1] &quot;matrix&quot;</span>
ma3 &lt;-<span class="st"> </span>my.mat[<span class="dv">1</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]
<span class="kw">class</span>(ma3)
<span class="co">#&gt; [1] &quot;numeric&quot;</span></code></pre>
<p><code>ma3</code> is NOT a matrix anymore!!! This is because one of its dimensions is 1.
Losing track of the class when subsetting can generate lots of problems in the middle of a large code. And it is a common source of error!
To be sure of keeping the class, we can use <code>drop=FALSE</code> (the class will not be dropped to, usually, a vector).</p>
<pre class="sourceCode r"><code class="sourceCode r">ma4 &lt;-<span class="st"> </span>my.mat[<span class="dv">1</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, drop=<span class="ot">FALSE</span>]
ma4
<span class="co">#&gt;   a b c</span>
<span class="co">#&gt; A 1 5 4</span>
<span class="kw">class</span>(ma4)
<span class="co">#&gt; [1] &quot;matrix&quot;</span></code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="simple-functions-on-vectors.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conditions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["MyR.pdf", "MyR.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
